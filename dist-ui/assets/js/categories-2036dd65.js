import{d as V,r as u,a as v,b as y,c as i,e as j,f as s,w as r,h as t,v as p,B as P,j as d,C as T,D,g as O,l as f,I as F,J as x,_ as I}from"./index-39a2cc13.js";import{P as J,u as N}from"./index-c5d10715.js";import{u as z}from"./useAuthButtons-3eafde18.js";import{P as L}from"./index-b2ce0c30.js";import{C as M,a as G}from"./ComponentDrawer-74ec0c56.js";import{g as E,a as K,b as Q,p as W,c as X,d as Y,e as Z,f as ee,h as te}from"./components-5491d717.js";import"./util-bb5d7d1d.js";import"./FootprintDrawer-364304d8.js";import"./StorageDrawer-2080d9a2.js";import"./index-9c5b8b05.js";const ae={class:"table-box"},oe={class:"table-box"},re=f(" New Component "),ne=f(" Delete "),se=f("Edit"),ie=V({name:"useComponent"});var le=V({...ie,setup(ce){const C=u(),_=u(),m=v({expand:"category"}),B=v({}),S=e=>e,A=e=>({datalist:e.items,total:e.totalItems,pageNum:e.page,pageSize:e.perPage}),U=e=>{typeof m.filter=="undefined"&&Object.assign(m,{filter:{category:""}}),Object.assign(m.filter,{category:e.id})},{BUTTONS:l}=z(),$=[{type:"selection",width:40,fixed:"left"},{prop:"mpn",label:"MPN",width:130,sortable:!0,search:!0,searchType:"text"},{prop:"category",label:"Category",width:120,sortable:!0,searchProps:{value:"id",label:"_fullName",props:{value:"id",label:"name",emitPath:!1},checkStrictly:!0},enumFunction:async()=>(await x(),await Q()),enumTreeFunction:async()=>(await x(),await E())},{prop:"description",label:"Description",search:!0,searchType:"text"},{prop:"action",label:"Action",width:100,fixed:"right"}],q=async e=>{await N(ee,{ids:e},"Delete the selected footprints(s)"),C.value.refresh()},H=async e=>{await N(te,{ids:e},"Delete the selected footprint categories(s)"),_.value.refresh()},w=u(),b=(e,n={})=>{let o={title:e,rowData:{...n},isView:e==="View",apiUrl:e==="New"?W:e==="Edit"?X:"",updateTable:C.value.refresh};w.value.acceptParams(o)},g=u(),h=(e,n={})=>{let o={title:e,rowData:{...n},isView:e==="View",apiUrl:e==="New"?Y:e==="Edit"?Z:"",updateTable:_.value.refresh};g.value.acceptParams(o)};return(e,n)=>{const o=y("el-button"),k=y("el-col"),R=y("el-row");return i(),j("div",ae,[s(R,{gutter:20},{default:r(()=>[s(k,{span:6},{default:r(()=>[s(L,{ref_key:"proTree",ref:_,requestApi:t(E),initParam:B,dataCallback:S,onHandleNodeClick:U},{treeHeader:r(a=>[t(l).add?(i(),p(o,{key:0,type:"primary",icon:t(P),onClick:n[0]||(n[0]=c=>h("New"))},null,8,["icon"])):d("v-if",!0),t(l).edit?(i(),p(o,{key:1,icon:t(T),disabled:a.row.id==="",onClick:c=>h("Edit",a.row)},null,8,["icon","disabled","onClick"])):d("v-if",!0),t(l).delete?(i(),p(o,{key:2,type:"danger",icon:t(D),plain:"",disabled:a.row.id==="",onClick:c=>H([a.row.id])},null,8,["icon","disabled","onClick"])):d("v-if",!0)]),_:1},8,["requestApi","initParam"])]),_:1}),s(k,{span:18},{default:r(()=>[O("div",oe,[s(J,{ref_key:"proTable",ref:C,columns:$,requestApi:t(K),initParam:m,isPageable:!0,dataCallback:A},{tableHeader:r(a=>[t(l).add?(i(),p(o,{key:0,type:"primary",icon:t(P),onClick:n[1]||(n[1]=c=>b("New"))},{default:r(()=>[re]),_:1},8,["icon"])):d("v-if",!0),t(l).delete?(i(),p(o,{key:1,type:"danger",icon:t(D),plain:"",disabled:!a.isSelected,onClick:c=>q(a.ids)},{default:r(()=>[ne]),_:2},1032,["icon","disabled","onClick"])):d("v-if",!0)]),expand:r(a=>[f(F(a.row),1)]),action:r(a=>[s(o,{type:"primary",link:"",icon:t(T),onClick:c=>b("Edit",a.row)},{default:r(()=>[se]),_:2},1032,["icon","onClick"])]),_:1},8,["requestApi","initParam"]),s(M,{ref_key:"drawerRefComponent",ref:w},null,512),s(G,{ref_key:"drawerRefComponentCategory",ref:g},null,512)])]),_:1})]),_:1})])}}}),ge=I(le,[["__file","C:/Users/phcre/Documents/JS/partman/client/src/views/categories/categories.vue"]]);export{ge as default};
