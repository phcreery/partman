import{P as j,u as v}from"./index-f6cecc40.js";import{u as O,g as P,a as F,b as I,p as z,c as L,d as M,e as G,f as J,h as K}from"./components-3024ebe5.js";import{P as Q}from"./index-f4cd435f.js";import{C as W,_ as X}from"./ComponentDrawer-b9133636.js";import{d as V,r as u,a as T,b as y,c as i,e as Y,f as s,w as r,u as t,t as p,A as D,B as d,C as N,_ as x,g as Z,j as C,D as ee,I as E}from"./index-0dd33b3d.js";import"./util-29963aac.js";import"./index-f8e1d059.js";import"./plugin-vue_export-helper-b2bddca3.js";import"./FootprintDrawer-57ebfb14.js";import"./StorageDrawer-c1b5f019.js";const te={class:"table-box"},ae={class:"table-box"},oe=C(" New Component "),re=C(" Delete "),ne=C("Edit"),se=V({name:"useComponent"});var be=V({...se,setup(ie){const f=u(),_=u(),m=T({expand:"category"}),A=T({}),B=e=>e,$=e=>({datalist:e.items,total:e.totalItems,pageNum:e.page,pageSize:e.perPage}),S=e=>{typeof m.filter=="undefined"&&Object.assign(m,{filter:{category:""}}),Object.assign(m.filter,{category:e.id})},{BUTTONS:l}=O(),U=[{type:"selection",width:40,fixed:"left"},{prop:"mpn",label:"MPN",width:130,sortable:!0,search:!0,searchType:"text"},{prop:"category",label:"Category",width:120,sortable:!0,searchProps:{value:"id",label:"_fullName",props:{value:"id",label:"name",emitPath:!1},checkStrictly:!0},enumFunction:async()=>(await E(),await I()),enumTreeFunction:async()=>(await E(),await P())},{prop:"description",label:"Description",search:!0,searchType:"text"},{prop:"action",label:"Action",width:100,fixed:"right"}],q=async e=>{await v(J,{ids:e},"Delete the selected footprints(s)"),f.value.refresh()},H=async e=>{await v(K,{ids:e},"Delete the selected footprint categories(s)"),_.value.refresh()},b=u(),w=(e,n={})=>{let o={title:e,rowData:{...n},isView:e==="View",apiUrl:e==="New"?z:e==="Edit"?L:"",updateTable:f.value.refresh};b.value.acceptParams(o)},g=u(),k=(e,n={})=>{let o={title:e,rowData:{...n},isView:e==="View",apiUrl:e==="New"?M:e==="Edit"?G:"",updateTable:_.value.refresh};g.value.acceptParams(o)};return(e,n)=>{const o=y("el-button"),h=y("el-col"),R=y("el-row");return i(),Y("div",te,[s(R,{gutter:20},{default:r(()=>[s(h,{span:6},{default:r(()=>[s(Q,{ref_key:"proTree",ref:_,requestApi:t(P),initParam:A,dataCallback:B,onHandleNodeClick:S},{treeHeader:r(a=>[t(l).add?(i(),p(o,{key:0,type:"primary",icon:t(D),onClick:n[0]||(n[0]=c=>k("New"))},null,8,["icon"])):d("",!0),t(l).edit?(i(),p(o,{key:1,icon:t(N),disabled:a.row.id==="",onClick:c=>k("Edit",a.row)},null,8,["icon","disabled","onClick"])):d("",!0),t(l).delete?(i(),p(o,{key:2,type:"danger",icon:t(x),plain:"",disabled:a.row.id==="",onClick:c=>H([a.row.id])},null,8,["icon","disabled","onClick"])):d("",!0)]),_:1},8,["requestApi","initParam"])]),_:1}),s(h,{span:18},{default:r(()=>[Z("div",ae,[s(j,{ref_key:"proTable",ref:f,columns:U,requestApi:t(F),initParam:m,isPageable:!0,dataCallback:$},{tableHeader:r(a=>[t(l).add?(i(),p(o,{key:0,type:"primary",icon:t(D),onClick:n[1]||(n[1]=c=>w("New"))},{default:r(()=>[oe]),_:1},8,["icon"])):d("",!0),t(l).delete?(i(),p(o,{key:1,type:"danger",icon:t(x),plain:"",disabled:!a.isSelected,onClick:c=>q(a.ids)},{default:r(()=>[re]),_:2},1032,["icon","disabled","onClick"])):d("",!0)]),expand:r(a=>[C(ee(a.row),1)]),action:r(a=>[s(o,{type:"primary",link:"",icon:t(N),onClick:c=>w("Edit",a.row)},{default:r(()=>[ne]),_:2},1032,["icon","onClick"])]),_:1},8,["requestApi","initParam"]),s(W,{ref_key:"drawerRefComponent",ref:b},null,512),s(X,{ref_key:"drawerRefComponentCategory",ref:g},null,512)])]),_:1})]),_:1})])}}});export{be as default};
