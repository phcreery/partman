import{d as E,r as f,a as v,b as w,c as s,e as R,f as i,w as o,h as t,v as p,B as F,j as d,C as P,D as T,g as j,l as m,I as O,J as D,_ as I}from"./index-39a2cc13.js";import{P as J,u as x}from"./index-c5d10715.js";import{u as z}from"./useAuthButtons-3eafde18.js";import{P as L}from"./index-b2ce0c30.js";import{F as G,a as K}from"./FootprintDrawer-364304d8.js";import{m as N,r as M,s as Q,k as W,t as X,n as Y,u as Z,v as ee,w as te}from"./components-5491d717.js";import"./util-bb5d7d1d.js";import"./index-9c5b8b05.js";const ae={class:"table-box"},re={class:"table-box"},oe=m(" New Footprint "),ne=m(" Delete "),ie=m("Edit"),se=E({name:"useComponent"});var le=E({...se,setup(ce){const _=f(),y=f(),u=v({expand:"category"}),V=v({}),B=e=>e,S=e=>({datalist:e.items,total:e.totalItems,pageNum:e.page,pageSize:e.perPage}),A=e=>{typeof u.filter=="undefined"&&Object.assign(u,{filter:{category:""}}),Object.assign(u.filter,{category:e.id})},{BUTTONS:l}=z(),U=[{type:"selection",width:40,fixed:"left"},{prop:"name",label:"Name",width:130,sortable:!0,search:!0,searchType:"text"},{prop:"category",label:"Category",width:120,sortable:!0,searchProps:{value:"id",label:"_fullName",props:{value:"id",label:"name",emitPath:!1},checkStrictly:!0},enumFunction:async()=>(await D(),await Q()),enumTreeFunction:async()=>(await D(),await N())},{prop:"description",label:"Description",search:!0,searchType:"text"},{prop:"action",label:"Action",width:100,fixed:"right"}],$=async e=>{await x(ee,{ids:e},"Delete the selected footprints(s)"),_.value.refresh()},q=async e=>{await x(te,{ids:e},"Delete the selected footprint categories(s)"),y.value.refresh()},b=f(),C=(e,n={})=>{let r={title:e,rowData:{...n},isView:e==="View",apiUrl:e==="New"?W:e==="Edit"?X:"",updateTable:_.value.refresh};b.value.acceptParams(r)},g=f(),k=(e,n={})=>{let r={title:e,rowData:{...n},isView:e==="View",apiUrl:e==="New"?Y:e==="Edit"?Z:"",updateTable:y.value.refresh};g.value.acceptParams(r)};return(e,n)=>{const r=w("el-button"),h=w("el-col"),H=w("el-row");return s(),R("div",ae,[i(H,{gutter:20},{default:o(()=>[i(h,{span:6},{default:o(()=>[i(L,{ref_key:"proTree",ref:y,requestApi:t(N),initParam:V,dataCallback:B,onHandleNodeClick:A},{treeHeader:o(a=>[t(l).add?(s(),p(r,{key:0,type:"primary",icon:t(F),onClick:n[0]||(n[0]=c=>k("New"))},null,8,["icon"])):d("v-if",!0),t(l).edit?(s(),p(r,{key:1,icon:t(P),disabled:a.row.id==="",onClick:c=>k("Edit",a.row)},null,8,["icon","disabled","onClick"])):d("v-if",!0),t(l).delete?(s(),p(r,{key:2,type:"danger",icon:t(T),plain:"",disabled:a.row.id==="",onClick:c=>q([a.row.id])},null,8,["icon","disabled","onClick"])):d("v-if",!0)]),_:1},8,["requestApi","initParam"])]),_:1}),i(h,{span:18},{default:o(()=>[j("div",re,[i(J,{ref_key:"proTable",ref:_,columns:U,requestApi:t(M),initParam:u,isPageable:!0,dataCallback:S},{tableHeader:o(a=>[t(l).add?(s(),p(r,{key:0,type:"primary",icon:t(F),onClick:n[1]||(n[1]=c=>C("New"))},{default:o(()=>[oe]),_:1},8,["icon"])):d("v-if",!0),t(l).delete?(s(),p(r,{key:1,type:"danger",icon:t(T),plain:"",disabled:!a.isSelected,onClick:c=>$(a.ids)},{default:o(()=>[ne]),_:2},1032,["icon","disabled","onClick"])):d("v-if",!0)]),expand:o(a=>[m(O(a.row),1)]),action:o(a=>[i(r,{type:"primary",link:"",icon:t(P),onClick:c=>C("Edit",a.row)},{default:o(()=>[ie]),_:2},1032,["icon","onClick"])]),_:1},8,["requestApi","initParam"]),i(G,{ref_key:"drawerRefFootprint",ref:b},null,512),i(K,{ref_key:"drawerRefFootprintCategory",ref:g},null,512)])]),_:1})]),_:1})])}}}),be=I(le,[["__file","C:/Users/phcre/Documents/JS/partman/client/src/views/footprints/footprints.vue"]]);export{be as default};
