import{P as H,u as v}from"./index-f6cecc40.js";import{u as R,m as F,r as O,s as I,j as z,t as L,n as G,v as J,w as K,x as M}from"./components-3024ebe5.js";import{P as Q}from"./index-f4cd435f.js";import{_ as W,a as X}from"./FootprintDrawer-57ebfb14.js";import{d as E,r as m,a as P,b as w,c as s,e as Y,f as i,w as o,u as t,t as p,A as T,B as d,C as x,_ as N,g as Z,j as f,D as ee,I as D}from"./index-0dd33b3d.js";import"./util-29963aac.js";import"./index-f8e1d059.js";import"./plugin-vue_export-helper-b2bddca3.js";const te={class:"table-box"},ae={class:"table-box"},re=f(" New Footprint "),oe=f(" Delete "),ne=f("Edit"),ie=E({name:"useComponent"});var ye=E({...ie,setup(se){const _=m(),y=m(),u=P({expand:"category"}),V=P({}),$=e=>e,A=e=>({datalist:e.items,total:e.totalItems,pageNum:e.page,pageSize:e.perPage}),B=e=>{typeof u.filter=="undefined"&&Object.assign(u,{filter:{category:""}}),Object.assign(u.filter,{category:e.id})},{BUTTONS:l}=R(),S=[{type:"selection",width:40,fixed:"left"},{prop:"name",label:"Name",width:130,sortable:!0,search:!0,searchType:"text"},{prop:"category",label:"Category",width:120,sortable:!0,searchProps:{value:"id",label:"_fullName",props:{value:"id",label:"name",emitPath:!1},checkStrictly:!0},enumFunction:async()=>(await D(),await I()),enumTreeFunction:async()=>(await D(),await F())},{prop:"description",label:"Description",search:!0,searchType:"text"},{prop:"action",label:"Action",width:100,fixed:"right"}],U=async e=>{await v(K,{ids:e},"Delete the selected footprints(s)"),_.value.refresh()},j=async e=>{await v(M,{ids:e},"Delete the selected footprint categories(s)"),y.value.refresh()},b=m(),C=(e,n={})=>{let r={title:e,rowData:{...n},isView:e==="View",apiUrl:e==="New"?z:e==="Edit"?L:"",updateTable:_.value.refresh};b.value.acceptParams(r)},g=m(),k=(e,n={})=>{let r={title:e,rowData:{...n},isView:e==="View",apiUrl:e==="New"?G:e==="Edit"?J:"",updateTable:y.value.refresh};g.value.acceptParams(r)};return(e,n)=>{const r=w("el-button"),h=w("el-col"),q=w("el-row");return s(),Y("div",te,[i(q,{gutter:20},{default:o(()=>[i(h,{span:6},{default:o(()=>[i(Q,{ref_key:"proTree",ref:y,requestApi:t(F),initParam:V,dataCallback:$,onHandleNodeClick:B},{treeHeader:o(a=>[t(l).add?(s(),p(r,{key:0,type:"primary",icon:t(T),onClick:n[0]||(n[0]=c=>k("New"))},null,8,["icon"])):d("",!0),t(l).edit?(s(),p(r,{key:1,icon:t(x),disabled:a.row.id==="",onClick:c=>k("Edit",a.row)},null,8,["icon","disabled","onClick"])):d("",!0),t(l).delete?(s(),p(r,{key:2,type:"danger",icon:t(N),plain:"",disabled:a.row.id==="",onClick:c=>j([a.row.id])},null,8,["icon","disabled","onClick"])):d("",!0)]),_:1},8,["requestApi","initParam"])]),_:1}),i(h,{span:18},{default:o(()=>[Z("div",ae,[i(H,{ref_key:"proTable",ref:_,columns:S,requestApi:t(O),initParam:u,isPageable:!0,dataCallback:A},{tableHeader:o(a=>[t(l).add?(s(),p(r,{key:0,type:"primary",icon:t(T),onClick:n[1]||(n[1]=c=>C("New"))},{default:o(()=>[re]),_:1},8,["icon"])):d("",!0),t(l).delete?(s(),p(r,{key:1,type:"danger",icon:t(N),plain:"",disabled:!a.isSelected,onClick:c=>U(a.ids)},{default:o(()=>[oe]),_:2},1032,["icon","disabled","onClick"])):d("",!0)]),expand:o(a=>[f(ee(a.row),1)]),action:o(a=>[i(r,{type:"primary",link:"",icon:t(x),onClick:c=>C("Edit",a.row)},{default:o(()=>[ne]),_:2},1032,["icon","onClick"])]),_:1},8,["requestApi","initParam"]),i(W,{ref_key:"drawerRefFootprint",ref:b},null,512),i(X,{ref_key:"drawerRefFootprintCategory",ref:g},null,512)])]),_:1})]),_:1})])}}});export{ye as default};
