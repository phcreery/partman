import{M as E,l as N,_ as q,a as z}from"./index-49f69917.js";import{d as f,G as B,r as b,a as y,o as P,b as a,c as k,e as F,f as e,w as t,g as r,u as h,h as U,i as A,F as G,j as S,k as j,E as D,p as H,l as J}from"./index-0dd33b3d.js";import{T as K}from"./tabs-b62ca399.js";import{_ as V}from"./plugin-vue_export-helper-b2bddca3.js";import"./index-f8e1d059.js";const O={class:"login-btn"},Q=S("Reset"),W=S(" Login "),X=f({__name:"LoginForm",setup(l){const p=B(),g=E(),$=K(),_=b(),C=y({username:[{required:!0,message:"Please enter user name",trigger:"blur"}],password:[{required:!0,message:"Please enter your password",trigger:"blur"}]}),n=y({username:"",password:""}),u=b(!1),I=j(),v=(o,s)=>{!o||o.validate(async m=>{if(!!m){u.value=!0;try{const d={username:n.username,password:n.password},i=await N(d);p.setToken(i.token),p.setUserInfo(i.user),g.setMenuList([]),$.closeMultipleTab(),D.success("Login successful!"),I.push({name:"home"})}finally{u.value=!1}}})},M=o=>{!o||o.resetFields()};return P(()=>{document.onkeydown=o=>{if(o=window.event||o,o.code==="Enter"||o.code==="enter"||o.code==="NumpadEnter"){if(u.value)return;v(_.value)}}}),(o,s)=>{const m=a("user"),d=a("el-icon"),i=a("el-input"),w=a("el-form-item"),R=a("lock"),T=a("el-form"),x=a("el-button");return k(),F(G,null,[e(T,{ref_key:"loginFormRef",ref:_,model:n,rules:C,size:"large"},{default:t(()=>[e(w,{prop:"username"},{default:t(()=>[e(i,{modelValue:n.username,"onUpdate:modelValue":s[0]||(s[0]=c=>n.username=c),placeholder:"Email"},{prefix:t(()=>[e(d,{class:"el-input__icon"},{default:t(()=>[e(m)]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(w,{prop:"password"},{default:t(()=>[e(i,{type:"password",modelValue:n.password,"onUpdate:modelValue":s[1]||(s[1]=c=>n.password=c),placeholder:"Password","show-password":"",autocomplete:"new-password"},{prefix:t(()=>[e(d,{class:"el-input__icon"},{default:t(()=>[e(R)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),r("div",O,[e(x,{icon:h(U),round:"",onClick:s[2]||(s[2]=c=>M(_.value)),size:"large"},{default:t(()=>[Q]),_:1},8,["icon"]),e(x,{icon:h(A),round:"",onClick:s[3]||(s[3]=c=>v(_.value)),size:"large",type:"primary",loading:u.value},{default:t(()=>[W]),_:1},8,["icon","loading"])])],64)}}});var Y=V(X,[["__scopeId","data-v-62610fd8"]]);const L=l=>(H("data-v-54bec579"),l=l(),J(),l),Z={class:"login-container flx-center"},ee={class:"login-box"},oe=L(()=>r("div",{class:"login-left"},[r("img",{class:"login-icon",src:z,alt:"login"})],-1)),se={class:"login-form"},te=L(()=>r("div",{class:"login-logo"},[r("h2",{class:"logo-text"},"partman")],-1)),ne=f({name:"login"}),ae=f({...ne,setup(l){return(p,g)=>(k(),F("div",Z,[e(q,{class:"dark"}),r("div",ee,[oe,r("div",se,[te,e(Y,{ref:"loginRef"},null,512)])])]))}});var ue=V(ae,[["__scopeId","data-v-54bec579"]]);export{ue as default};
