import{d as C,r as l,o as T,U as h,b as a,c as b,e as v,j as i,g as y,X as F,f as o,w as k,h as L,Y as U,_ as j}from"./index-39a2cc13.js";const D={class:"tree-box"},H={class:"tree-header"},I={class:"header-button-lf"},R={key:0,class:"header-button-ri"},$=C({name:"component"}),E=C({...$,props:{requestApi:{type:Function,required:!0},dataCallback:{type:Function,required:!1},initParam:{type:null,required:!1,default:{}},toolButton:{type:Boolean,required:!1,default:!0},id:{type:String,required:!1,default:"id"},label:{type:String,required:!1,default:"name"},childrenName:{type:String,required:!1,default:"children"},showAll:{type:Boolean,required:!1,default:!0}},emits:["handleNodeClick"],setup(s,{expose:g,emit:u}){const t=s,_=l(),r=l({id:"",[t.label]:"All"}),d=l(""),p=l([{id:"",[t.label]:"All"}]),f=l({}),N={label:t.label,children:t.childrenName};T(async()=>{c()});const c=async()=>{try{Object.assign(f.value,t.initParam,{});let{data:e}=await t.requestApi(f.value);t.dataCallback&&(e=t.dataCallback(e)),p.value=t.showAll?[{id:"",[t.label]:"All"},...e]:e}catch(e){}};h(()=>t.initParam,()=>c(),{deep:!0});const m=()=>{r.value={id:"",[t.label]:"All"},c(),u("handleNodeClick",{id:"",[t.label]:"All"})},q=e=>{r.value=e,u("handleNodeClick",e)};h(d,e=>{_.value.filter(e)});const w=(e,n)=>e?n[t.label].toLowerCase().includes(e.toLowerCase()):!0;return g({selectedItem:r,refresh:m}),(e,n)=>{const x=a("el-button"),A=a("el-button-group"),P=a("el-input"),B=a("el-tree"),V=a("el-scrollbar");return b(),v("div",D,[i(" Header buttons "),y("div",H,[y("div",I,[F(e.$slots,"treeHeader",{row:r.value},void 0,!0)]),s.toolButton?(b(),v("div",R,[o(A,null,{default:k(()=>[o(x,{icon:L(U),onClick:m},null,8,["icon"])]),_:1})])):i("v-if",!0)]),o(P,{modelValue:d.value,"onUpdate:modelValue":n[0]||(n[0]=S=>d.value=S),placeholder:"Filter keyword"},null,8,["modelValue"]),i(" Tree "),o(V,null,{default:k(()=>[o(B,{ref_key:"treeRef",ref:_,data:p.value,props:N,onNodeClick:q,"default-expand-all":"","expand-on-click-node":!1,"highlight-current":"","filter-node-method":w,"node-key":s.id,"current-node-key":""},null,8,["data","node-key"])]),_:1})])}}});var M=j(E,[["__scopeId","data-v-177d0aae"],["__file","C:/Users/phcre/Documents/JS/partman/client/src/components/ProTree/index.vue"]]);export{M as P};
