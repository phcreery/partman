import{_ as T}from"./plugin-vue_export-helper-b2bddca3.js";import{d as C,r as l,o as q,S as m,b as o,c as h,e as b,g as v,W as I,f as a,w as k,B as R,u as S,X as $}from"./index-0dd33b3d.js";const j={class:"tree-box"},D={class:"tree-header"},E={class:"header-button-lf"},F={key:0,class:"header-button-ri"},H=C({name:"component"}),M=C({...H,props:{requestApi:null,dataCallback:null,initParam:{default:{}},toolButton:{type:Boolean,default:!0},id:{default:"id"},label:{default:"name"},childrenName:{default:"children"},showAll:{type:Boolean,default:!0}},emits:["handleNodeClick"],setup(s,{expose:y,emit:u}){const t=s,i=l(),n=l({id:"",[t.label]:"All"}),d=l(""),_=l([{id:"",[t.label]:"All"}]),f=l({}),N={label:t.label,children:t.childrenName};q(async()=>{c()});const c=async()=>{try{Object.assign(f.value,t.initParam,{});let{data:e}=await t.requestApi(f.value);t.dataCallback&&(e=t.dataCallback(e)),_.value=t.showAll?[{id:"",[t.label]:"All"},...e]:e}catch(e){}};m(()=>t.initParam,()=>c(),{deep:!0});const p=()=>{n.value={id:"",[t.label]:"All"},c(),u("handleNodeClick",{id:"",[t.label]:"All"})},w=e=>{n.value=e,u("handleNodeClick",e)};m(d,e=>{i.value.filter(e)});const g=(e,r)=>e?r[t.label].toLowerCase().includes(e.toLowerCase()):!0;return y({selectedItem:n,refresh:p}),(e,r)=>{const x=o("el-button"),A=o("el-button-group"),B=o("el-input"),P=o("el-tree"),V=o("el-scrollbar");return h(),b("div",j,[v("div",D,[v("div",E,[I(e.$slots,"treeHeader",{row:n.value},void 0,!0)]),s.toolButton?(h(),b("div",F,[a(A,null,{default:k(()=>[a(x,{icon:S($),onClick:p},null,8,["icon"])]),_:1})])):R("",!0)]),a(B,{modelValue:d.value,"onUpdate:modelValue":r[0]||(r[0]=L=>d.value=L),placeholder:"Filter keyword"},null,8,["modelValue"]),a(V,null,{default:k(()=>[a(P,{ref_key:"treeRef",ref:i,data:_.value,props:N,onNodeClick:w,"default-expand-all":"","expand-on-click-node":!1,"highlight-current":"","filter-node-method":g,"node-key":s.id,"current-node-key":""},null,8,["data","node-key"])]),_:1})])}}});var W=T(M,[["__scopeId","data-v-219f5e0f"]]);export{W as P};
