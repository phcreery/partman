import{d as k,r as b,a as E,b as F,c as p,e as A,f as u,w as n,h as o,v as d,B,j as h,a8 as L,a9 as $,D as I,l as i,I as C,aa as V,C as U,_ as R}from"./index-39a2cc13.js";import{P as j,u as J}from"./index-c5d10715.js";import{I as q,J as g,u as z}from"./index-20ab75ee.js";import{u as H}from"./useAuthButtons-3eafde18.js";import{C as M}from"./ComponentDrawer-74ec0c56.js";import{b as O,g as G,j as K,y as Q,z as W,i as X,a as Y,A as Z,B as ee,p as te,c as v,f as ae}from"./components-5491d717.js";import"./util-bb5d7d1d.js";import"./FootprintDrawer-364304d8.js";import"./StorageDrawer-2080d9a2.js";import"./index-9c5b8b05.js";const oe={class:"table-box"},re=i("New Component"),ne=i("Import"),se=i("Export"),le=i(" Delete "),ie=i("Edit"),ce=k({name:"useComponent"});var pe=k({...ce,setup(ue){const l=b(),S=E({expand:"footprint, category, storage_location, storage_categories"}),P=e=>({datalist:e.items,total:e.totalItems,pageNum:e.page,pageSize:e.perPage}),{BUTTONS:m}=H(),x=[{type:"selection",width:40,fixed:"left"},{type:"expand",label:""},{prop:"category",label:"Category",align:"left",searchProps:{value:"id",label:"_fullName",props:{value:"id",label:"name",emitPath:!1},checkStrictly:!0},sortable:!0,search:!0,searchType:"treeSelect",enumFunction:O,enumTreeFunction:G,isShow:!1},{prop:"name",label:"Name",width:260,sortable:!0,renderText:e=>`${e.manufacturer} - ${e.mpn}`},{prop:"manufacturer",label:"Mfr.",width:130,sortable:!0,search:!0,searchType:"text",isShow:!1},{prop:"mpn",label:"MPN",width:130,sortable:!0,search:!0,searchType:"text",isShow:!1},{prop:"description",label:"Description",search:!0,searchType:"text"},{prop:"footprint",label:"Footprint",width:120,sortable:!0,search:!0,searchType:"multipleSelect",enumFunction:K,searchProps:{value:"id",label:"name"},isShow:!1},{prop:"stock",label:"Stock",width:80,search:!1},{prop:"ipn",label:"IPN",width:60,search:!0,searchType:"text",isShow:!1},{prop:"storage_location",label:"Short Location",width:160,sortable:!0,enumFunction:Q,searchProps:{value:"id",label:"name"},isShow:!1},{prop:"storage_location",label:"Location",width:160,sortable:!0,search:!0,searchProps:{value:"id",label:"_fullName",props:{value:"id",label:"name",disabled:"disabled",emitPath:!1},checkStrictly:!0},searchType:"treeSelect",enumFunction:W,enumTreeFunction:X,isShow:!0},{prop:"created",label:"Created",width:200,sortable:!0,search:!0,searchType:"datetimerange",searchProps:{},isShow:!1},{prop:"updated",label:"Updated",width:200,sortable:!0,search:!0,searchType:"datetimerange",searchProps:{},isShow:!1},{prop:"action",label:"Action",width:100,fixed:"right"}],T=async e=>{await J(ae,{ids:e},"Delete the selected component(s)"),l.value.refresh()},N=async()=>{let e="all",s=await Z({filter:l.value.searchParam}),t=l.value.tableColumns.map(c=>{var y;return(y=c.prop)!=null?y:""}),a=["action","expand","selection","footprint","name"];t=t.filter(c=>!a.includes(c));let r=g(s,t);z(()=>r,`${e}_component_list`,{},!0,".csv")},_=b(),D=()=>{let e=l.value.tableColumns.map(r=>{var c;return(c=r.prop)!=null?c:""}),s=["action","expand","selection","footprint","name"];e=e.filter(r=>!s.includes(r));let t=g({},e),a={title:"component",tempApi:()=>t,importApi:ee,getTableList:l.value.refresh};_.value.acceptParams(a)},w=b(),f=(e,s={})=>{let t={title:e,rowData:{...s},isView:e==="View",apiUrl:e==="New"?te:e==="Edit"?v:e==="Stock"?v:"",updateTable:l.value.refresh};w.value.acceptParams(t)};return(e,s)=>{const t=F("el-button");return p(),A("div",oe,[u(j,{ref_key:"proTable",ref:l,columns:x,requestApi:o(Y),initParam:S,isPageable:!0,dataCallback:P},{tableHeader:n(a=>[o(m).add?(p(),d(t,{key:0,type:"primary",icon:o(B),onClick:s[0]||(s[0]=r=>f("New"))},{default:n(()=>[re]),_:1},8,["icon"])):h("v-if",!0),o(m).batchAdd?(p(),d(t,{key:1,type:"primary",icon:o(L),plain:"",onClick:D},{default:n(()=>[ne]),_:1},8,["icon"])):h("v-if",!0),o(m).export?(p(),d(t,{key:2,type:"primary",icon:o($),plain:"",onClick:N},{default:n(()=>[se]),_:1},8,["icon"])):h("v-if",!0),o(m).batchDelete?(p(),d(t,{key:3,type:"danger",icon:o(I),plain:"",disabled:!a.isSelected,onClick:r=>T(a.ids)},{default:n(()=>[le]),_:2},1032,["icon","disabled","onClick"])):h("v-if",!0)]),expand:n(a=>[i(C(a.row),1)]),stock:n(a=>[i(C(a.row.stock)+" ",1),u(t,{type:"primary",link:"",icon:o(V),onClick:r=>f("Stock",a.row)},null,8,["icon","onClick"])]),action:n(a=>[u(t,{type:"primary",link:"",icon:o(U),onClick:r=>f("Edit",a.row)},{default:n(()=>[ie]),_:2},1032,["icon","onClick"])]),_:1},8,["requestApi","initParam"]),u(M,{ref_key:"drawerRef",ref:w},null,512),u(q,{ref_key:"dialogRef",ref:_},null,512)])}}}),ve=R(pe,[["__file","C:/Users/phcre/Documents/JS/partman/client/src/views/inventory/inventory.vue"]]);export{ve as default};
