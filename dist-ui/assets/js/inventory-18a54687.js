import{P as E,u as A}from"./index-f6cecc40.js";import{I as F,J as w,u as B}from"./index-f87d0c58.js";import{u as $,b as V,g as I,l as L,i as R,a as U,y as j,z as q,p as z,c as k,f as H}from"./components-3024ebe5.js";import{C as J}from"./ComponentDrawer-b9133636.js";import{d as v,r as b,a as M,b as O,c as p,e as G,f as u,w as n,u as o,t as d,A as K,B as f,a7 as Q,a8 as W,_ as X,j as i,D as g,a9 as Y,C as Z}from"./index-0dd33b3d.js";import"./util-29963aac.js";import"./plugin-vue_export-helper-b2bddca3.js";import"./index-f8e1d059.js";import"./FootprintDrawer-57ebfb14.js";import"./StorageDrawer-c1b5f019.js";const ee={class:"table-box"},te=i("New Component"),ae=i("Import"),oe=i("Export"),re=i(" Delete "),ne=i("Edit"),le=v({name:"useComponent"});var _e=v({...le,setup(se){const s=b(),x=M({expand:"footprint, category, storage_location"}),S=e=>({datalist:e.items,total:e.totalItems,pageNum:e.page,pageSize:e.perPage}),{BUTTONS:m}=$(),P=[{type:"selection",width:40,fixed:"left"},{type:"expand",label:""},{prop:"category",label:"Category",align:"left",searchProps:{value:"id",label:"_fullName",props:{value:"id",label:"name",emitPath:!1},checkStrictly:!0},sortable:!0,search:!0,searchType:"treeSelect",enumFunction:V,enumTreeFunction:I,isShow:!1},{prop:"name",label:"Name",width:160,sortable:!0,renderText:e=>`${e.manufacturer} - ${e.mpn}`},{prop:"manufacturer",label:"Mfr.",width:130,sortable:!0,search:!0,searchType:"text",isShow:!1},{prop:"mpn",label:"MPN",width:130,sortable:!0,search:!0,searchType:"text",isShow:!1},{prop:"description",label:"Description",search:!0,searchType:"text"},{prop:"footprint",label:"Footprint",width:120,sortable:!0,search:!0,searchType:"multipleSelect",enumFunction:L,searchProps:{value:"id",label:"name"},isShow:!1},{prop:"stock",label:"Stock",width:80,search:!1},{prop:"ipn",label:"IPN",width:60,search:!0,searchType:"text",isShow:!1},{prop:"storage_location",label:"Location",sortable:!0,search:!0,searchType:"select",enumFunction:R,searchProps:{value:"id",label:"name"},isShow:!1},{prop:"action",label:"Action",width:100,fixed:"right"}],T=async e=>{await A(H,{ids:e},"Delete the selected component(s)"),s.value.refresh()},N=async()=>{let e="all",l=await j({filter:s.value.searchParam}),t=s.value.tableColumns.map(c=>{var y;return(y=c.prop)!=null?y:""}),a=["action","expand","selection","footprint","name"];t=t.filter(c=>!a.includes(c));let r=w(l,t);B(()=>r,`${e}_component_list`,{},!0,".csv")},C=b(),D=()=>{let e=s.value.tableColumns.map(r=>{var c;return(c=r.prop)!=null?c:""}),l=["action","expand","selection","footprint","name"];e=e.filter(r=>!l.includes(r));let t=w({},e),a={title:"component",tempApi:()=>t,importApi:q,getTableList:s.value.refresh};C.value.acceptParams(a)},_=b(),h=(e,l={})=>{let t={title:e,rowData:{...l},isView:e==="View",apiUrl:e==="New"?z:e==="Edit"?k:e==="Stock"?k:"",updateTable:s.value.refresh};_.value.acceptParams(t)};return(e,l)=>{const t=O("el-button");return p(),G("div",ee,[u(E,{ref_key:"proTable",ref:s,columns:P,requestApi:o(U),initParam:x,isPageable:!0,dataCallback:S},{tableHeader:n(a=>[o(m).add?(p(),d(t,{key:0,type:"primary",icon:o(K),onClick:l[0]||(l[0]=r=>h("New"))},{default:n(()=>[te]),_:1},8,["icon"])):f("",!0),o(m).batchAdd?(p(),d(t,{key:1,type:"primary",icon:o(Q),plain:"",onClick:D},{default:n(()=>[ae]),_:1},8,["icon"])):f("",!0),o(m).export?(p(),d(t,{key:2,type:"primary",icon:o(W),plain:"",onClick:N},{default:n(()=>[oe]),_:1},8,["icon"])):f("",!0),o(m).batchDelete?(p(),d(t,{key:3,type:"danger",icon:o(X),plain:"",disabled:!a.isSelected,onClick:r=>T(a.ids)},{default:n(()=>[re]),_:2},1032,["icon","disabled","onClick"])):f("",!0)]),expand:n(a=>[i(g(a.row),1)]),stock:n(a=>[i(g(a.row.stock)+" ",1),u(t,{type:"primary",link:"",icon:o(Y),onClick:r=>h("Stock",a.row)},null,8,["icon","onClick"])]),action:n(a=>[u(t,{type:"primary",link:"",icon:o(Z),onClick:r=>h("Edit",a.row)},{default:n(()=>[ne]),_:2},1032,["icon","onClick"])]),_:1},8,["requestApi","initParam"]),u(J,{ref_key:"drawerRef",ref:_},null,512),u(F,{ref_key:"dialogRef",ref:C},null,512)])}}});export{_e as default};
