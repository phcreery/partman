import{d as g,r as b,a as E,b as A,c as p,e as F,f as u,w as n,h as o,v as d,B,j as f,a8 as $,a9 as I,D as V,l as i,I as w,aa as L,C as R,_ as U}from"./index-411664c1.js";import{P as j,u as J}from"./index-7941d293.js";import{I as q,J as v,u as z}from"./index-543d9bc1.js";import{u as H,b as M,g as O,j as G,i as K,a as Q,y as W,z as X,p as Y,c as k,f as Z}from"./components-bdf98b0c.js";import{C as ee}from"./ComponentDrawer-f83f9e0d.js";import"./util-006b265b.js";import"./index-6bf0d9f6.js";import"./FootprintDrawer-bb92f8f3.js";import"./StorageDrawer-60d89e19.js";const te={class:"table-box"},ae=i("New Component"),oe=i("Import"),re=i("Export"),ne=i(" Delete "),se=i("Edit"),le=g({name:"useComponent"});var ie=g({...le,setup(ce){const l=b(),x=E({expand:"footprint, category, storage_location"}),S=e=>({datalist:e.items,total:e.totalItems,pageNum:e.page,pageSize:e.perPage}),{BUTTONS:m}=H(),P=[{type:"selection",width:40,fixed:"left"},{type:"expand",label:""},{prop:"category",label:"Category",align:"left",searchProps:{value:"id",label:"_fullName",props:{value:"id",label:"name",emitPath:!1},checkStrictly:!0},sortable:!0,search:!0,searchType:"treeSelect",enumFunction:M,enumTreeFunction:O,isShow:!1},{prop:"name",label:"Name",width:160,sortable:!0,renderText:e=>`${e.manufacturer} - ${e.mpn}`},{prop:"manufacturer",label:"Mfr.",width:130,sortable:!0,search:!0,searchType:"text",isShow:!1},{prop:"mpn",label:"MPN",width:130,sortable:!0,search:!0,searchType:"text",isShow:!1},{prop:"description",label:"Description",search:!0,searchType:"text"},{prop:"footprint",label:"Footprint",width:120,sortable:!0,search:!0,searchType:"multipleSelect",enumFunction:G,searchProps:{value:"id",label:"name"},isShow:!1},{prop:"stock",label:"Stock",width:80,search:!1},{prop:"ipn",label:"IPN",width:60,search:!0,searchType:"text",isShow:!1},{prop:"storage_location",label:"Location",sortable:!0,search:!0,searchType:"select",enumFunction:K,searchProps:{value:"id",label:"name"},isShow:!1},{prop:"action",label:"Action",width:100,fixed:"right"}],T=async e=>{await J(Z,{ids:e},"Delete the selected component(s)"),l.value.refresh()},D=async()=>{let e="all",s=await W({filter:l.value.searchParam}),t=l.value.tableColumns.map(c=>{var y;return(y=c.prop)!=null?y:""}),a=["action","expand","selection","footprint","name"];t=t.filter(c=>!a.includes(c));let r=v(s,t);z(()=>r,`${e}_component_list`,{},!0,".csv")},_=b(),N=()=>{let e=l.value.tableColumns.map(r=>{var c;return(c=r.prop)!=null?c:""}),s=["action","expand","selection","footprint","name"];e=e.filter(r=>!s.includes(r));let t=v({},e),a={title:"component",tempApi:()=>t,importApi:X,getTableList:l.value.refresh};_.value.acceptParams(a)},C=b(),h=(e,s={})=>{let t={title:e,rowData:{...s},isView:e==="View",apiUrl:e==="New"?Y:e==="Edit"?k:e==="Stock"?k:"",updateTable:l.value.refresh};C.value.acceptParams(t)};return(e,s)=>{const t=A("el-button");return p(),F("div",te,[u(j,{ref_key:"proTable",ref:l,columns:P,requestApi:o(Q),initParam:x,isPageable:!0,dataCallback:S},{tableHeader:n(a=>[o(m).add?(p(),d(t,{key:0,type:"primary",icon:o(B),onClick:s[0]||(s[0]=r=>h("New"))},{default:n(()=>[ae]),_:1},8,["icon"])):f("v-if",!0),o(m).batchAdd?(p(),d(t,{key:1,type:"primary",icon:o($),plain:"",onClick:N},{default:n(()=>[oe]),_:1},8,["icon"])):f("v-if",!0),o(m).export?(p(),d(t,{key:2,type:"primary",icon:o(I),plain:"",onClick:D},{default:n(()=>[re]),_:1},8,["icon"])):f("v-if",!0),o(m).batchDelete?(p(),d(t,{key:3,type:"danger",icon:o(V),plain:"",disabled:!a.isSelected,onClick:r=>T(a.ids)},{default:n(()=>[ne]),_:2},1032,["icon","disabled","onClick"])):f("v-if",!0)]),expand:n(a=>[i(w(a.row),1)]),stock:n(a=>[i(w(a.row.stock)+" ",1),u(t,{type:"primary",link:"",icon:o(L),onClick:r=>h("Stock",a.row)},null,8,["icon","onClick"])]),action:n(a=>[u(t,{type:"primary",link:"",icon:o(R),onClick:r=>h("Edit",a.row)},{default:n(()=>[se]),_:2},1032,["icon","onClick"])]),_:1},8,["requestApi","initParam"]),u(ee,{ref_key:"drawerRef",ref:C},null,512),u(q,{ref_key:"dialogRef",ref:_},null,512)])}}}),ye=U(ie,[["__file","C:/Users/phcre/Documents/JS/partman/client/src/views/inventory/inventory.vue"]]);export{ye as default};
