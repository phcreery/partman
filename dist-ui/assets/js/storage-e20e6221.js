import{d as E,r as g,a as v,b as y,c as i,e as O,f as n,w as o,h as a,v as d,B as S,j as p,C as P,D as T,g as j,l as f,I as F,J as D,_ as I}from"./index-411664c1.js";import{P as J,u as N}from"./index-7941d293.js";import{u as z,o as x,M as L,N as M,l as Q,O as G,q as K,P as W,Q as X,R as Y}from"./components-bdf98b0c.js";import{P as Z}from"./index-1607a68b.js";import{S as ee,a as ae}from"./StorageDrawer-60d89e19.js";import"./util-006b265b.js";import"./index-6bf0d9f6.js";const te={class:"table-box"},re={class:"table-box"},oe=f(" New Storage "),se=f(" Delete "),ne=f("Edit"),ie=E({name:"useComponent"});var le=E({...ie,setup(ce){const m=g(),_=g(),u=v({expand:"category"}),V=v({}),B=e=>e,A=e=>({datalist:e.items,total:e.totalItems,pageNum:e.page,pageSize:e.perPage}),U=e=>{typeof u.filter=="undefined"&&Object.assign(u,{filter:{category:""}}),Object.assign(u.filter,{category:e.id})},{BUTTONS:l}=z(),$=[{type:"selection",width:40,fixed:"left"},{prop:"name",label:"Name",width:130,sortable:!0,search:!0,searchType:"text"},{prop:"category",label:"Category",width:120,sortable:!0,searchProps:{value:"id",label:"_fullName",props:{value:"id",label:"name",emitPath:!1},checkStrictly:!0},enumFunction:async()=>(await D(),await M()),enumTreeFunction:async()=>(await D(),await x())},{prop:"description",label:"Description",search:!0,searchType:"text"},{prop:"action",label:"Action",width:100,fixed:"right"}],q=async e=>{await N(X,{ids:e},"Delete the selected footprints(s)"),m.value.refresh()},R=async e=>{await N(Y,{ids:e},"Delete the selected footprint categories(s)"),_.value.refresh()},w=g(),b=(e,s={})=>{let r={title:e,rowData:{...s},isView:e==="View",apiUrl:e==="New"?Q:e==="Edit"?G:"",updateTable:m.value.refresh};w.value.acceptParams(r)},C=g(),k=(e,s={})=>{let r={title:e,rowData:{...s},isView:e==="View",apiUrl:e==="New"?K:e==="Edit"?W:"",updateTable:_.value.refresh};C.value.acceptParams(r)};return(e,s)=>{const r=y("el-button"),h=y("el-col"),H=y("el-row");return i(),O("div",te,[n(H,{gutter:20},{default:o(()=>[n(h,{span:6},{default:o(()=>[n(Z,{ref_key:"proTree",ref:_,requestApi:a(x),initParam:V,dataCallback:B,onHandleNodeClick:U},{treeHeader:o(t=>[a(l).add?(i(),d(r,{key:0,type:"primary",icon:a(S),onClick:s[0]||(s[0]=c=>k("New"))},null,8,["icon"])):p("v-if",!0),a(l).edit?(i(),d(r,{key:1,icon:a(P),disabled:t.row.id==="",onClick:c=>k("Edit",t.row)},null,8,["icon","disabled","onClick"])):p("v-if",!0),a(l).delete?(i(),d(r,{key:2,type:"danger",icon:a(T),plain:"",disabled:t.row.id==="",onClick:c=>R([t.row.id])},null,8,["icon","disabled","onClick"])):p("v-if",!0)]),_:1},8,["requestApi","initParam"])]),_:1}),n(h,{span:18},{default:o(()=>[j("div",re,[n(J,{ref_key:"proTable",ref:m,columns:$,requestApi:a(L),initParam:u,isPageable:!0,dataCallback:A},{tableHeader:o(t=>[a(l).add?(i(),d(r,{key:0,type:"primary",icon:a(S),onClick:s[1]||(s[1]=c=>b("New"))},{default:o(()=>[oe]),_:1},8,["icon"])):p("v-if",!0),a(l).delete?(i(),d(r,{key:1,type:"danger",icon:a(T),plain:"",disabled:!t.isSelected,onClick:c=>q(t.ids)},{default:o(()=>[se]),_:2},1032,["icon","disabled","onClick"])):p("v-if",!0)]),expand:o(t=>[f(F(t.row),1)]),action:o(t=>[n(r,{type:"primary",link:"",icon:a(P),onClick:c=>b("Edit",t.row)},{default:o(()=>[ne]),_:2},1032,["icon","onClick"])]),_:1},8,["requestApi","initParam"]),n(ee,{ref_key:"drawerRefStorage",ref:w},null,512),n(ae,{ref_key:"drawerRefStorageCategory",ref:C},null,512)])]),_:1})]),_:1})])}}}),ye=I(le,[["__file","C:/Users/phcre/Documents/JS/partman/client/src/views/storage/storage.vue"]]);export{ye as default};
