import{P as T,u as N}from"./index-f6cecc40.js";import{u as $,S,T as E,U as C,V as B}from"./components-3024ebe5.js";import{d as h,a as g,r as d,b as c,c as w,e as x,f as l,w as t,U as A,V as R,j as p,E as q,u,t as D,A as z,B as V,_ as F,D as H,C as j}from"./index-0dd33b3d.js";import"./util-29963aac.js";import"./index-f8e1d059.js";const I=p("Cancel"),L=p("Save"),M=h({name:"UserDrawer"}),O=h({...M,setup(U,{expose:m}){const y=g({name:[{required:!0,message:"Please upload the component name",trigger:"change"}]}),r=d(!1),a=d({isView:!1,title:""}),k=s=>{a.value=s,r.value=!0},f=d(),b=()=>{f.value.validate(async s=>{if(!!s)try{await a.value.apiUrl(a.value.rowData),q.success({message:`${a.value.title} component success!`}),a.value.updateTable(),r.value=!1}catch(e){}})};return m({acceptParams:k}),(s,e)=>{const i=c("el-input"),n=c("el-form-item"),o=c("el-form"),_=c("el-button"),P=c("el-drawer");return w(),x("div",null,[l(P,{modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=v=>r.value=v),"destroy-on-close":!0,size:"600px",title:`${a.value.title} Component`},{footer:t(()=>[l(_,{onClick:e[1]||(e[1]=v=>r.value=!1)},{default:t(()=>[I]),_:1}),A(l(_,{type:"primary",onClick:b},{default:t(()=>[L]),_:1},512),[[R,!a.value.isView]])]),default:t(()=>[l(o,{ref_key:"ruleFormRef",ref:f,rules:y,disabled:a.value.isView,model:a.value.rowData,"label-width":"130px","label-suffix":" :","append-to-body":!0},{default:t(()=>[l(n,{label:"Name",prop:"name"},{default:t(()=>[l(i,{modelValue:a.value.rowData.name,"onUpdate:modelValue":e[0]||(e[0]=v=>a.value.rowData.name=v),placeholder:"Please fill in the user name",clearable:"",rows:4,type:"textarea",autosize:""},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","disabled","model"])]),_:1},8,["modelValue","title"])])}}});var G=O;const J={class:"table-box"},K=p("New User"),Q=p(" Delete "),W=p("Edit"),X=h({name:"useComponent"});var le=h({...X,setup(U){const m=d(),y=g({}),r=e=>({datalist:e.items,total:e.totalItems,pageNum:e.page,pageSize:e.perPage}),{BUTTONS:a}=$(),k=[{type:"selection",width:40,fixed:"left"},{type:"expand",label:""},{prop:"name",label:"Name",sortable:!0,search:!0,searchType:"text"},{prop:"email",label:"Email",sortable:!0,search:!0,searchType:"text"},{prop:"action",label:"Action",width:100,fixed:"right"}],f=async e=>{await N(B,{ids:e},"Delete the selected component(s)"),m.value.refresh()};d();const b=d(),s=(e,i={})=>{let n={title:e,rowData:{...i},isView:e==="View",apiUrl:e==="New"?E:e==="Edit"?C:e==="Stock"?C:"",updateTable:m.value.refresh};b.value.acceptParams(n)};return(e,i)=>{const n=c("el-button");return w(),x("div",J,[l(T,{ref_key:"proTable",ref:m,columns:k,requestApi:u(S),initParam:y,isPageable:!0,dataCallback:r},{tableHeader:t(o=>[u(a).add?(w(),D(n,{key:0,type:"primary",icon:u(z),onClick:i[0]||(i[0]=_=>s("New"))},{default:t(()=>[K]),_:1},8,["icon"])):V("",!0),u(a).batchDelete?(w(),D(n,{key:1,type:"danger",icon:u(F),plain:"",disabled:!o.isSelected,onClick:_=>f(o.ids)},{default:t(()=>[Q]),_:2},1032,["icon","disabled","onClick"])):V("",!0)]),expand:t(o=>[p(H(o.row),1)]),action:t(o=>[l(n,{type:"primary",link:"",icon:u(j),onClick:_=>s("Edit",o.row)},{default:t(()=>[W]),_:2},1032,["icon","onClick"])]),_:1},8,["requestApi","initParam"]),l(G,{ref_key:"drawerRef",ref:b},null,512)])}}});export{le as default};
